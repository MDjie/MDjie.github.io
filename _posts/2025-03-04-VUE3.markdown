---
layout: post
title: "Learning records for VUE3"
date: 2025-04-03 11:09:10 +0800
category: jekyll update
---
# VUE3
## basic grammar
VUEä¸­æœ€åŸºç¡€çš„å°±æ˜¯vueæŒ‡ä»¤ï¼ŒæŒ‡ä»¤æ—¶ä¸€ç§ä»¥v-å¼€å¤´çš„ç‰¹æ®Šè¡¨è¾¾å¼ï¼Œé™¤äº†***v-on,v-slot,v-for***å¤–ï¼Œæ‰€æœ‰æŒ‡ä»¤éƒ½æœŸæœ›ä¸€ä¸ªè¡¨è¾¾å¼ä½œä¸ºè¾“å…¥ã€‚ä¸€ä¸ªæŒ‡ä»¤çš„ä»»åŠ¡å°±æ˜¯åœ¨è¾“å…¥æ”¹å˜æ—¶ï¼Œåœ¨***domæ–‡æ¡£ä¸­è¿›è¡Œæ›´æ–°***
ã€‚æŒ‡ä»¤çš„ç»“æ„ä¸º
![è¡¨è¾¾å¼ç»“æ„](../assets/VUE3-struction-architecture.png)
### æ–‡å­—æ’å€¼ä¸htmlæ’å…¥
`{{virable}}`could dynamically insert the content of variable into the page.`v-html="virable"`could parse variable as a html element and show it in the page.
### å±æ€§ç»‘å®š
`<div v-bind:id="dynamicId"></div>`will bind a dynamic value to the div's id attribute. it's shorthand syntax is `<div :id="dynamicId"></div>`. if the variable's name is same as the attribute, then the syntax could
be more easier:`<div :id></div>`,same as :id="id".This feature is supported only in 3,4+.
æ‰€æœ‰çš„æ•°æ®ç»‘å®šä¸­éƒ½æ”¯æŒå®Œæ•´çš„ JavaScript è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥åœ¨ç»‘å®šçš„è¡¨è¾¾å¼ä¸­ä½¿ç”¨ä¸€ä¸ªç»„ä»¶æš´éœ²çš„æ–¹æ³•å¦‚ï¼š
```
<time :title="toTitleDate(date)" :datetime="date">
  {{ formatDate(date) }}
</time>
```
è¡¨è¾¾å¼ä¸­ä»…èƒ½ä½¿ç”¨æœ‰é™çš„å…¨å±€å¯¹è±¡åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨ä¸­ä¼šæš´éœ²å¸¸ç”¨çš„å†…ç½®å…¨å±€å¯¹è±¡ï¼Œæ¯”å¦‚ Math å’Œ Dateã€‚æ²¡æœ‰æ˜¾å¼åŒ…å«åœ¨åˆ—è¡¨ä¸­çš„å…¨å±€å¯¹è±¡å°†ä¸èƒ½åœ¨æ¨¡æ¿å†…è¡¨è¾¾å¼ä¸­è®¿é—®ï¼Œä¾‹å¦‚ç”¨æˆ·é™„åŠ åœ¨ window ä¸Šçš„å±æ€§ã€‚

### åŠ¨æ€å‚æ•°
`<a :[attributeName]="url"> ... </a>` è¿™é‡Œçš„ attributeName ä¼šä½œä¸ºä¸€ä¸ª JavaScript è¡¨è¾¾å¼è¢«åŠ¨æ€æ‰§è¡Œï¼Œè®¡ç®—å¾—åˆ°çš„å€¼ä¼šè¢«ç”¨ä½œæœ€ç»ˆçš„å‚æ•°ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ çš„ç»„ä»¶å®ä¾‹æœ‰ä¸€ä¸ªæ•°æ®å±æ€§ attributeNameï¼Œå…¶å€¼ä¸º "href"ï¼Œé‚£ä¹ˆè¿™ä¸ªç»‘å®šå°±ç­‰ä»·äº v-bind:hrefã€‚
åŠ¨æ€å‚æ•°ä¸­è¡¨è¾¾å¼çš„å€¼åº”å½“æ˜¯ä¸€ä¸ª***å­—ç¬¦ä¸²ï¼Œæˆ–è€…æ˜¯ null***ã€‚ç‰¹æ®Šå€¼ null æ„ä¸º***æ˜¾å¼ç§»é™¤è¯¥ç»‘å®š***ã€‚å…¶ä»–éå­—ç¬¦ä¸²çš„å€¼ä¼šè§¦å‘è­¦å‘Šã€‚

### ä¿®é¥°ç¬¦Modifiers
ç”¨æ¥è¡¨æ˜æŒ‡ä»¤çš„ç‰¹æ®Šæ‰§è¡Œæ–¹å¼ã€‚

### å“åº”å¼åŸºç¡€
#### ç”¨refå‡½æ•°å£°æ˜ä¸€ä¸ªå“åº”å¼å˜é‡
ref() æ¥æ”¶å‚æ•°ï¼Œå¹¶å°†å…¶åŒ…è£¹åœ¨ä¸€ä¸ªå¸¦æœ‰ .value å±æ€§çš„ ref å¯¹è±¡ä¸­è¿”å›ï¼š
```aiexclude
const count = ref(0)

console.log(count) // { value: 0 }
console.log(count.value) // 0
```
åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼š
```aiexclude
<script>
import { ref } from 'vue'

export default {
  // `setup` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„é’©å­ï¼Œä¸“é—¨ç”¨äºç»„åˆå¼ APIã€‚
  setup() {
    const count = ref(0)

    // å°† ref æš´éœ²ç»™æ¨¡æ¿
    return {
      count
    }
  }
}
</script>

<template>
<div>{{ count }}</div>
</template>
```

åœ¨ç»„ä»¶ä¸­ä½¿ç”¨å“åº”å¼å˜é‡æ—¶ï¼Œä¸ç”¨åŠ `.value`ã€‚å¯ä»¥ç›´æ¥åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸­æ”¹å˜ä¸€ä¸ªrefçš„å€¼ã€‚
```aiexclude
<button @click="count++">
  {{ count }}
</button>
```
#### ç”¨reactiveæ¥åˆ›å»ºä¸€ä¸ªå“åº”å¼å˜é‡
```aiexclude

import { reactive } from 'vue'

const state = reactive({ count: 0 })
```
reactive() å°†ä½¿å¯¹è±¡æœ¬èº«å…·æœ‰å“åº”æ€§ã€‚

| ç‰¹æ€§            | ref             |reactive|
|---------------|-----------------|---|
| æ•°æ®ç±»å‹          | 	åªæ¥å—å¯¹è±¡/æ•°ç»„       |	æ¥å—ä»»ä½•ç±»å‹çš„å€¼|
| è®¿é—®æ–¹å¼	         | ç›´æ¥è®¿é—®å±æ€§	         | éœ€è¦é€šè¿‡ .value è®¿é—® |
| æ¨¡æ¿ä¸­ä½¿ç”¨         | 	ç›´æ¥ä½¿ç”¨           |	è‡ªåŠ¨è§£åŒ…(æ— éœ€ .value)|
| é‡æ–°èµ‹å€¼	         | ä¸èƒ½æ•´ä¸ªæ›¿æ¢(ä¼šå¤±å»å“åº”æ€§)	 | å¯ä»¥æ•´ä¸ªæ›¿æ¢(ä¿æŒå“åº”æ€§) |
| è§£æ„/å±•å¼€	        | ä¼šå¤±å»å“åº”æ€§          |	ä¿æŒå“åº”æ€§|
| TypeScriptæ”¯æŒ	 | ç±»å‹æ¨æ–­æ›´è‡ªç„¶         | 	éœ€è¦æ³›å‹å‚æ•°         |

#### å£°æ˜æ–¹æ³•
ç”¨functionå…³é”®è¯åœ¨`set up`å£°æ˜ä¸€ä¸ªæ–¹æ³•,å¹¶æš´éœ²ç»™æ¨¡æ¿ä»¥ä½¿ç”¨ã€‚
```aiexclude
import { ref } from 'vue'

export default {
  setup() {
    const count = ref(0)

    function increment() {
      // åœ¨ JavaScript ä¸­éœ€è¦ .value
      count.value++
    }

    // ä¸è¦å¿˜è®°åŒæ—¶æš´éœ² increment å‡½æ•°
    return {
      count,
      increment
    }
  }
}
```
å½“æœ‰å¾ˆå¤šå˜é‡ä¸æ–¹æ³•éœ€è¦æš´éœ²æ—¶ï¼Œå¯ä»¥ä½¿ç”¨`<script setup>...<script>`æ¥è‡ªåŠ¨æš´éœ²ç»™æ¨¡æ¿ã€‚å¦‚ï¼š
```aiexclude
<script setup>
import { ref } from 'vue'

const count = ref(0)

function increment() {
  count.value++
}
</script>

<template>
  <button @click="increment">
    {{ count }}
  </button>
</template>
```
VUEçš„å“åº”å…·æœ‰***æ·±å±‚æ¬¡***çš„ç‰¹æ€§ï¼Œå³åµŒå¥—ç±»å‹çš„æ·±å±‚è¢«ä¿®æ”¹æ—¶ï¼Œå¯¹åº”çš„æ¨¡æ¿ä¹Ÿèƒ½åŠ¨æ€åœ°å¾—åˆ°å“åº”ã€‚
### refçš„ä½¿ç”¨æ³¨æ„äº‹é¡¹
- ref ä½œä¸ºå“åº”å¼æ•°ç»„æˆ–åŸç”Ÿé›†åˆç±»å‹ (å¦‚ Map) ä¸­çš„å…ƒç´ è¢«è®¿é—®æ—¶ï¼Œå®ƒä¸ä¼šè¢«è§£åŒ…
```aiexclude
const books = reactive([ref('Vue 3 Guide')])
// è¿™é‡Œéœ€è¦ .value
console.log(books[0].value)

const map = reactive(new Map([['count', ref(0)]]))
// è¿™é‡Œéœ€è¦ .value
console.log(map.get('count').value)
```
- åœ¨æ¨¡æ¿æ¸²æŸ“ä¸Šä¸‹æ–‡ä¸­ï¼Œåªæœ‰é¡¶çº§çš„ ref å±æ€§æ‰ä¼šè¢«è§£åŒ…ã€‚

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œcount å’Œ object æ˜¯é¡¶çº§å±æ€§ï¼Œä½† object.id ä¸æ˜¯
```aiexclude
const count = ref(0)
const object = { id: ref(1) }
```
å› æ­¤ï¼Œè¿™ä¸ªè¡¨è¾¾å¼æŒ‰é¢„æœŸå·¥ä½œï¼š
```aiexclude
{{ count + 1 }}
```
...ä½†è¿™ä¸ªä¸ä¼šï¼š
```aiexclude
{{ object.id + 1 }}
```
- å¦‚æœ ref æ˜¯æ–‡æœ¬æ’å€¼çš„æœ€ç»ˆè®¡ç®—å€¼ (å³ {{ }} æ ‡ç­¾)ï¼Œé‚£ä¹ˆå®ƒå°†è¢«è§£åŒ…ã€‚
```aiexclude
{{ object.id }}
```
ä»¥ä¸Šéé¡¶å±‚å±æ€§ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚
### è®¡ç®—å±æ€§
é¡¾åæ€ä¹‰ï¼Œè®¡ç®—å±æ€§å°±æ˜¯é€šè¿‡è®¡ç®—å¾—åˆ°çš„ä¸€ä¸ªå±æ€§ã€‚å¯¹äºç®€å•çš„è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡è¡¨è¾¾å¼çš„æ–¹å¼æ¥è·å¾—ï¼š`<span>{{ author.books.length > 0 ? 'Yes' : 'No' }}</span>`
è¿™æ ·åšå¯¹äºä¸€æ¬¡æ€§çš„è®¡ç®—ï¼Œç¡®å®å¾ˆæ–¹ä¾¿ã€‚ä½†æ˜¯å¦‚æœæ¨¡æ¿ä¸­æœ‰å¤šä¸ªåœ°æ–¹éœ€è¦ç”¨åˆ°åŒæ ·çš„è®¡ç®—åçš„ç»“æœï¼Œç»§ç»­ä½¿ç”¨è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œå°±ä¸å¾—ä¸åœ¨æ¯ä¸ªéœ€è¦çš„åœ°æ–¹å†™ä¸€æ¬¡è¡¨è¾¾å¼ã€‚
å¯¹äºè¿™ç§æƒ…å†µã€‚å¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§æ¥ä»£æ›¿ï¼š
```aiexclude
const publishedBooksMessage = computed(() => {
  return author.books.length > 0 ? 'Yes' : 'No'
})

<template>
  <p>Has published books:</p>
  <span>{{ publishedBooksMessage }}</span>
</template>
```
è‡³æ­¤ï¼Œå…¶å®ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªæ–¹æ³•æ¥è¾¾åˆ°ç›¸åº”çš„æ•ˆæœï¼š
```aiexclude
fucntion comput(){
return author.books.length>0?'Yes':'No'
}
```
æ–¹æ³•ä¸è®¡ç®—å±æ€§æœ‰ä¸€é‡è¦åŒºåˆ«ï¼šè®¡ç®—å±æ€§æ˜¯***æœ‰ç¼“å­˜çš„***ã€‚æ–¹æ³•çš„è§¦å‘æ–¹å¼ä¸ºè°ƒç”¨ï¼Œè®¡ç®—å±æ€§çš„è§¦å‘æ–¹å¼ä¸ºå€¼çš„æ›´æ–°ï¼Œä¸”è®¡ç®—å±æ€§èƒ½åŸºäºå“åº”å¼ä¾èµ–è¢«ç¼“å­˜ã€‚æ‰€ä»¥åªè¦booksä¸å˜ï¼Œæ— è®ºå¤šå°‘æ¬¡è®¿é—®publishedBooksMessage ï¼Œéƒ½ä¼šç«‹å³è¿”å›ç¼“å­˜çš„å€¼ã€‚
è®¡ç®—å±æ€§è¿˜æ˜¯å¯å†™çš„ï¼Œè¿™ç‚¹ä¸å¸¸ç”¨åˆ°ï¼Œä¾¿ä¸è¿‡å¤šä»‹ç»äº†ã€‚
***getterä¸­è¿˜å¯ä»¥è·å–åˆ°ä¸Šä¸€æ¬¡çš„å€¼***ã€‚
### ç±»ä¸æ ·å¼çš„ç»‘å®š
#### ç±»çš„ç»‘å®š
`<div :class={active:isActive}><div>`ä¼ å…¥ä¸€ä¸ªå¯¹è±¡æ¥åŠ¨æ€æ¸²æŸ“ç±»åï¼Œå½“isActiveä¸ºtrueæ—¶ï¼Œactiveæ‰è¢«åŠ å…¥classçš„å€¼ä¸­ã€‚å¯ä»¥æ‰©å±•åˆ°å¤šä¸ªå¯¹è±¡å±æ€§ï¼Œåœ¨å¯¹è±¡ä¸­ä½¿ç”¨è®¡ç®—å±æ€§
```aiexclude
const isActive = ref(true)
const error = ref(null)

const classObject = computed(() => ({
  active: isActive.value && !error.value,
  'text-danger': error.value && error.value.type === 'fatal'
}))

<div :class="classObject"></div>
```
#### æ ·å¼çš„ç»‘å®š
```aiexclude
const styleObject = reactive({
  color: 'red',
  fontSize: '30px'
})

<div :style="styleObject"></div>
```
åŒæ ·çš„ï¼Œå¦‚æœæ ·å¼å¯¹è±¡éœ€è¦æ›´å¤æ‚çš„é€»è¾‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¿”å›æ ·å¼å¯¹è±¡çš„è®¡ç®—å±æ€§ã€‚

### æ¡ä»¶ï¼Œåˆ—è¡¨æ¸²æŸ“
æ¡ä»¶æ¸²æŸ“
```aiexclude
<h1 v-if="bool1&&bool2">Vue is awesome!</h1>
<h1 v-else-if=bool1&&!bool2>Oh no ğŸ˜¢</h1>
<h1 v-else>last one</h1>
```
æ¡ä»¶æ¸²æŸ“ä¹Ÿå¯ä»¥ç”¨åœ¨templateä¸Šã€‚v-showä¸v-ifå·®ä¸å¤šï¼Œä½†æ˜¯ä¸å¯ç”¨åœ¨templateä¸Šï¼Œå…¶ä¼šä¿®è¯¥displayå±æ€§å€¼ã€‚

åˆ—è¡¨æ¸²æŸ“

æ•°ç»„æ¸²æŸ“åˆ—è¡¨
```aiexclude
const items = ref([{ message: 'Foo' }, { message: 'Bar' }])

<li v-for="item in items">
  {{ item.message }}
</li>

```
åœ¨ v-for å—ä¸­å¯ä»¥å®Œæ•´åœ°è®¿é—®***çˆ¶ä½œç”¨åŸŸå†…çš„å±æ€§å’Œå˜é‡***ã€‚v-for ä¹Ÿæ”¯æŒä½¿ç”¨å¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºå½“å‰é¡¹çš„***ä½ç½®ç´¢å¼•***ã€‚

å¯¹è±¡åˆ—è¡¨æ¸²æŸ“
```aiexclude
const myObject = reactive({
  title: 'How to do lists in Vue',
  author: 'Jane Doe',
  publishedAt: '2016-04-10'
})

<template>
<ul>
<li v-for="value in mobject")>
{{value}}
</li>
</ul>
//é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°å¼•å…¥key
<ul>
<li v-for="(value,key) in mobject")>
{{value}}.{{key}}
</li>
</ul>
</template>
//åŒç†ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å¼•å…¥index
```
èŒƒå›´å€¼è¿›è¡Œåˆ—è¡¨æ¸²æŸ“
```aiexclude
<span v-for="n in 10">{{ n }}</span>
```
v-for VS v-if

å®ƒä»¬åŒæ—¶å­˜åœ¨äºä¸€ä¸ªèŠ‚ç‚¹ä¸Šæ—¶ï¼Œv-if æ¯” v-for çš„ä¼˜å…ˆçº§æ›´é«˜ã€‚è¿™æ„å‘³ç€ v-if çš„æ¡ä»¶å°†æ— æ³•è®¿é—®åˆ° v-for ä½œç”¨åŸŸå†…å®šä¹‰çš„å˜é‡åˆ«åã€‚
```aiexclude
<!--
 è¿™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºå±æ€§ todo æ­¤æ—¶
 æ²¡æœ‰åœ¨è¯¥å®ä¾‹ä¸Šå®šä¹‰
-->
<li v-for="todo in todos" v-if="!todo.isComplete">
  {{ todo.name }}
</li>
```
è§£å†³æ–¹æ³•ï¼šåœ¨å¤–å…ˆåŒ…è£…ä¸€å±‚`<template>`å†åœ¨å…¶ä¸Šä½¿ç”¨`v-for`å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ (è¿™ä¹Ÿæ›´åŠ æ˜æ˜¾æ˜“è¯»)

```aiexclude
<template v-for="todo in todos">
  <li v-if="!todo.isComplete">
    {{ todo.name }}
  </li>
</template>
```
æ ¹æ®æ•°ç»„çŠ¶æ€æ¸²æŸ“ï¼š
```aiexclude
<div v-for="item in items" :key="item.id">
  <!-- å†…å®¹ -->
</div>
```
key ç»‘å®šçš„å€¼æœŸæœ›æ˜¯ä¸€ä¸ªåŸºç¡€ç±»å‹çš„å€¼ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²æˆ– number ç±»å‹ã€‚ä¸è¦ç”¨å¯¹è±¡ä½œä¸º v-for çš„ keyã€‚
### äº‹ä»¶å¤„ç†
`v-on:click.prevent="count++"`å¯ä»¥ç®€å•ç¼–å†™ä¸€ä¸ªç‚¹å‡»å“åº”é€»è¾‘ã€‚ä½†å“åº”é€»è¾‘å¤æ‚æ—¶ï¼Œéœ€è¦æ„é€ æ–¹æ³•æ¥å¤„ç†
```aiexclude
const name = ref('Vue.js')

function greet(event) {
  alert(`Hello ${name.value}!`)
  // `event` æ˜¯ DOM åŸç”Ÿäº‹ä»¶
  if (event) {
    alert(event.target.tagName)
  }
}

<!-- `greet` æ˜¯ä¸Šé¢å®šä¹‰è¿‡çš„æ–¹æ³•å -->
<button @click="greet">Greet</button>
```
æ–¹æ³•äº‹ä»¶å¤„ç†å™¨ä¼šè‡ªåŠ¨æ¥æ”¶åŸç”Ÿ DOM äº‹ä»¶å¹¶è§¦å‘æ‰§è¡Œã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡è¢«è§¦å‘äº‹ä»¶çš„ event.target è®¿é—®åˆ°è¯¥ DOM å…ƒç´ ã€‚